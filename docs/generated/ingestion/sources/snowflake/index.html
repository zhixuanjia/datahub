<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="search" type="application/opensearchdescription+xml" title="DataHub" href="/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600&display=swap"><title data-react-helmet="true">Snowflake | DataHub</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://datahubproject.io/docs/generated/ingestion/sources/snowflake"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Snowflake | DataHub"><meta data-react-helmet="true" name="description" content="There are 2 sources that provide integration with Snowflake"><meta data-react-helmet="true" property="og:description" content="There are 2 sources that provide integration with Snowflake"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://datahubproject.io/docs/generated/ingestion/sources/snowflake"><link data-react-helmet="true" rel="alternate" href="https://datahubproject.io/docs/generated/ingestion/sources/snowflake" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://datahubproject.io/docs/generated/ingestion/sources/snowflake" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.b5f128ff.css">
<link rel="preload" href="/assets/js/runtime~main.cd372191.js" as="script">
<link rel="preload" href="/assets/js/main.764953a7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" style="background-color:#090a11;color:#ffffff" role="banner"><div class="announcementBarContent_3EUC"><div><img src="/img/acryl-logo-white-mark.svg"><p><strong>Managed DataHub</strong><span> &nbsp;Acryl Data delivers an easy to consume DataHub platform for the enterprise</span></p></div> <a href="https://www.acryldata.io/datahub-beta" target="_blank" class="button button--primary">Sign up for Managed DataHub →</a></div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/datahub-logo-color-light-horizontal.svg" alt="DataHub Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/datahub-logo-color-dark-horizontal.svg" alt="DataHub Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/docs/demo">Demo</a><a href="https://blog.datahubproject.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://feature-requests.datahubproject.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Feature Requests<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://feature-requests.datahubproject.io/roadmap" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Roadmap<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://slack.datahubproject.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link item__icon item__slack" aria-label="Slack"></a><a href="https://github.com/datahub-project/datahub" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link item__icon item__github" aria-label="GitHub"></a><a href="https://www.youtube.com/channel/UC3qFQC5IiwR5fvWEqi_tJ5w" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link item__icon item__youtube" aria-label="YouTube"></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE" style="background-image:url(&quot;data:image/svg+xml,%3Csvg width=&#x27;18&#x27; height=&#x27;18&#x27; fill=&#x27;none&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%3E%3Cpath d=&#x27;M15.556 9.784A6.065 6.065 0 0 1 14 9.987a5.948 5.948 0 0 1-4.235-1.752 6.02 6.02 0 0 1-1.548-5.792.75.75 0 0 0-.918-.917A7.51 7.51 0 0 0 3.93 3.462c-2.924 2.924-2.924 7.682 0 10.607a7.453 7.453 0 0 0 5.304 2.198c2.003 0 3.886-.78 5.302-2.197a7.505 7.505 0 0 0 1.937-3.368.75.75 0 0 0-.918-.918Zm-2.079 3.225a5.96 5.96 0 0 1-4.242 1.758 5.964 5.964 0 0 1-4.243-1.758 6.009 6.009 0 0 1 0-8.486 5.942 5.942 0 0 1 1.545-1.112 7.52 7.52 0 0 0 2.167 5.886 7.479 7.479 0 0 0 5.886 2.168 6.026 6.026 0 0 1-1.113 1.544Z&#x27; fill=&#x27;%23fff&#x27; opacity=&#x27;.5&#x27;/%3E%3C/svg%3E&quot;);width:18px;height:18px;margin:-4px 0 0 -4px"> </span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE" style="background-image:url(&quot;data:image/svg+xml,%3Csvg width=&#x27;18&#x27; height=&#x27;18&#x27; fill=&#x27;none&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%3E%3Cg opacity=&#x27;.5&#x27; fill=&#x27;%23fff&#x27;%3E%3Cpath d=&#x27;M5.245 9A3.76 3.76 0 0 0 9 12.755 3.76 3.76 0 0 0 12.755 9 3.76 3.76 0 0 0 9 5.245 3.76 3.76 0 0 0 5.245 9ZM9 6.745A2.258 2.258 0 0 1 11.255 9 2.258 2.258 0 0 1 9 11.255 2.258 2.258 0 0 1 6.745 9 2.258 2.258 0 0 1 9 6.745Zm-.752 7.505h1.5v2.25h-1.5v-2.25Zm0-12.75h1.5v2.25h-1.5V1.5Zm-6.75 6.75h2.25v1.5h-2.25v-1.5Zm12.75 0h2.25v1.5h-2.25v-1.5ZM3.164 13.773l1.59-1.592 1.062 1.06-1.59 1.592-1.062-1.06ZM12.18 4.758l1.592-1.592 1.06 1.06-1.591 1.592-1.06-1.06ZM4.756 5.819l-1.59-1.592 1.06-1.06L5.818 4.76l-1.06 1.06ZM14.832 13.773l-1.06 1.06-1.592-1.591 1.06-1.06 1.592 1.59Z&#x27;/%3E%3C/g%3E%3C/svg%3E&quot;);width:18px;height:18px;margin:-4px 0 0 -4px"> </span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">DataHub</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Metadata Ingestion</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/metadata-ingestion">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Sources</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/athena">Athena</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/azure-ad">Azure AD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/bigquery">BigQuery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/business-glossary">Business Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/clickhouse">ClickHouse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/data-lake-files">Data lake files</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/dbt">dbt</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/druid">Druid</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/elastic-search">Elastic Search</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/feast">Feast</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/file-based-lineage">File Based Lineage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/file">File</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/glue">Glue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/hive">Hive</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/kafka-connect">Kafka Connect</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/kafka">Kafka</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/ldap">LDAP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/looker">Looker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/mariadb">MariaDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/metabase">Metabase</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/mode">Mode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/mongodb">MongoDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/mssql">Microsoft SQL Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/mysql">MySQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/nifi">Nifi</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/okta">Okta</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/openapi">OpenAPI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/oracle">Oracle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/postgres">Postgres</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/powerbi">PowerBI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/presto-on-hive">Presto on Hive</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/pulsar">Pulsar</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/redash">Redash</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/redshift">Redshift</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/s3">S3 Data Lake</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/sagemaker">SageMaker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/generated/ingestion/sources/snowflake">Snowflake</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/sqlalchemy">Other SQLAlchemy databases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/superset">Superset</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/tableau">Tableau</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/generated/ingestion/sources/trino">Trino</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/metadata-ingestion/transformers">Transformers</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Sinks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Scheduling</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Push-Based Integrations</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Lineage</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Guides</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Metadata Modeling</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">GraphQL API</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">OpenAPI</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Usage Guides</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Developer Guides</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deployment Guides</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Community</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Snowflake</h1></header><p>There are 2 sources that provide integration with Snowflake</p><table><tr><td>Source Module</td><td>Documentation</td></tr><tr><td><p><code>snowflake</code></p></td><td><p> <a href="#module-snowflake">Read more...</a></p></td></tr><tr><td><p><code>snowflake-usage</code></p></td><td><p> <a href="#module-snowflake-usage">Read more...</a></p></td></tr></table><p>To get all metadata from Snowflake you need to use two plugins <code>snowflake</code> and <code>snowflake-usage</code>. Both of them are described in this page. These will require 2 separate recipes. We understand this is not ideal and we plan to make this easier in the future.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="module-snowflake">Module <code>snowflake</code><a aria-hidden="true" class="hash-link" href="#module-snowflake" title="Direct link to heading">​</a></h2><p><img src="https://img.shields.io/badge/support%20status-certified-brightgreen" alt="Certified"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="important-capabilities">Important Capabilities<a aria-hidden="true" class="hash-link" href="#important-capabilities" title="Direct link to heading">​</a></h3><table><thead><tr><th>Capability</th><th>Status</th><th>Notes</th></tr></thead><tbody><tr><td><a href="/docs/metadata-ingestion/docs/dev_guides/sql_profiles">Data Profiling</a></td><td>✅</td><td>Optionally enabled via configuration</td></tr><tr><td>Descriptions</td><td>✅</td><td>Enabled by default</td></tr><tr><td><a href="/docs/metadata-ingestion/docs/dev_guides/stateful#removal-of-stale-tables-and-views">Detect Deleted Entities</a></td><td>✅</td><td>Enabled via stateful ingestion</td></tr><tr><td><a href="/docs/domains">Domains</a></td><td>✅</td><td>Supported via the <code>domain</code> config field</td></tr><tr><td><a href="/docs/platform-instances">Platform Instance</a></td><td>✅</td><td>Enabled by default</td></tr><tr><td>Table-Level Lineage</td><td>✅</td><td>Optionally enabled via configuration</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_31ik" id="install-the-plugin">Install the Plugin<a aria-hidden="true" class="hash-link" href="#install-the-plugin" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pip </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;acryl-datahub[snowflake]&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="quickstart-recipe">Quickstart Recipe<a aria-hidden="true" class="hash-link" href="#quickstart-recipe" title="Direct link to heading">​</a></h3><p>Check out the following recipe to get started with ingestion! See <a href="#config-details">below</a> for full configuration options.</p><p>For general pointers on writing and running a recipe, see our <a href="/docs/metadata-ingestion#recipes">main recipe guide</a></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">source</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> snowflake</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">check_role_grants</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">provision_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Optional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">dry_run</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">run_ingestion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">admin_username</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;${SNOWFLAKE_ADMIN_USER}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">admin_password</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;${SNOWFLAKE_ADMIN_PASS}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># This option is recommended to be used for the first time to ingest all lineage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">ignore_start_time_lineage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># This is an alternative option to specify the start_time for lineage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># if you don&#x27;t want to look back since beginning</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">start_time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;2022-03-01T00:00:00Z&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Coordinates</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">account_id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;abc48144&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">warehouse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;COMPUTE_WH&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Credentials</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">username</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;${SNOWFLAKE_USER}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;${SNOWFLAKE_PASS}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;datahub_role&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Change these as per your database names. Remove to all all databases</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">database_pattern</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">allow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;^ACCOUNTING_DB$&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;^MARKETING_DB$&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">schema_pattern</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">deny</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;information_schema.*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">table_pattern</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">allow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># If you want to ingest only few tables with name revenue and sales</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.*revenue&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.*sales&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">profiling</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Change to false to disable profiling</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">profile_pattern</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">allow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;ACCOUNTING_DB.*.*&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MARKETING_DB.*.*&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">deny</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;.*information_schema.*&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">sink</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># sink configs</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="config-details">Config Details<a aria-hidden="true" class="hash-link" href="#config-details" title="Direct link to heading">​</a></h3><p>Note that a <code>.</code> is used to denote nested fields in the YAML recipe.</p><details class="details_2Ziz alert alert--info details_1VDD" data-collapsed="true"><summary>View All Configuration Options</summary><div><div class="collapsibleContent_3OHp"><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td>env</td><td></td><td>string</td><td>The environment that all assets produced by this connector belong to</td><td>PROD</td></tr><tr><td>platform</td><td></td><td>string</td><td>The platform that this source connects to</td><td>None</td></tr><tr><td>platform_instance</td><td></td><td>string</td><td>The instance of the platform that all assets produced by this recipe belong to</td><td>None</td></tr><tr><td>options</td><td></td><td>Dict</td><td></td><td></td></tr><tr><td>include_views</td><td></td><td>boolean</td><td>Whether views should be ingested.</td><td>True</td></tr><tr><td>include_tables</td><td></td><td>boolean</td><td>Whether tables should be ingested.</td><td>True</td></tr><tr><td>bucket_duration</td><td></td><td>enum(BucketDuration)</td><td>Size of the time window to aggregate usage stats..</td><td>DAY</td></tr><tr><td>end_time</td><td></td><td>string</td><td>Latest date of usage to consider. Default: Last full day in UTC (or hour, depending on <code>bucket_duration</code>)</td><td>None</td></tr><tr><td>start_time</td><td></td><td>string</td><td>Earliest date of usage to consider. Default: Last full day in UTC (or hour, depending on <code>bucket_duration</code>)</td><td>None</td></tr><tr><td>scheme</td><td></td><td>string</td><td></td><td>snowflake</td></tr><tr><td>username</td><td></td><td>string</td><td>Snowflake username.</td><td>None</td></tr><tr><td>password</td><td></td><td>string</td><td>Snowflake password.</td><td>None</td></tr><tr><td>private_key_path</td><td></td><td>string</td><td>The path to the private key if using key pair authentication. See: <a href="https://docs.snowflake.com/en/user-guide/key-pair-auth.html" target="_blank" rel="noopener noreferrer">https://docs.snowflake.com/en/user-guide/key-pair-auth.html</a></td><td>None</td></tr><tr><td>private_key_password</td><td></td><td>string</td><td>Password for your private key if using key pair authentication.</td><td>None</td></tr><tr><td>authentication_type</td><td></td><td>string</td><td>The type of authenticator to use when connecting to Snowflake. Supports &quot;DEFAULT_AUTHENTICATOR&quot;, &quot;EXTERNAL_BROWSER_AUTHENTICATOR&quot; and &quot;KEY_PAIR_AUTHENTICATOR&quot;.</td><td>DEFAULT_AUTHENTICATOR</td></tr><tr><td>host_port</td><td></td><td>string</td><td>DEPRECATED: Snowflake account. e.g. abc48144</td><td>None</td></tr><tr><td>account_id</td><td></td><td>string</td><td>Snowflake account. e.g. abc48144</td><td>None</td></tr><tr><td>warehouse</td><td></td><td>string</td><td>Snowflake warehouse.</td><td>None</td></tr><tr><td>role</td><td></td><td>string</td><td>Snowflake role.</td><td>None</td></tr><tr><td>include_table_lineage</td><td></td><td>boolean</td><td>If enabled, populates the snowflake table-to-table and s3-to-snowflake table lineage. Requires appropriate grants given to the role.</td><td>True</td></tr><tr><td>include_view_lineage</td><td></td><td>boolean</td><td>If enabled, populates the snowflake view-&gt;table and table-&gt;view lineages (no view-&gt;view lineage yet). Requires appropriate grants given to the role, and include_table_lineage to be True.</td><td>True</td></tr><tr><td>connect_args</td><td></td><td>Dict</td><td>Connect args to pass to Snowflake SqlAlchemy driver</td><td></td></tr><tr><td>check_role_grants</td><td></td><td>boolean</td><td>If set to True then checks role grants at the beginning of the ingestion run. To be used for debugging purposes. If you think everything is working fine then set it to False. In some cases this can take long depending on how many roles you might have.</td><td>None</td></tr><tr><td>ignore_start_time_lineage</td><td></td><td>boolean</td><td></td><td>None</td></tr><tr><td>upstream_lineage_in_report</td><td></td><td>boolean</td><td></td><td>None</td></tr><tr><td>stateful_ingestion</td><td></td><td>SQLAlchemyStatefulIngestionConfig (see below for fields)</td><td></td><td></td></tr><tr><td>stateful_ingestion.enabled</td><td></td><td>boolean</td><td>The type of the ingestion state provider registered with datahub.</td><td>None</td></tr><tr><td>stateful_ingestion.max_checkpoint_state_size</td><td></td><td>integer</td><td>The maximum size of the checkpoint state in bytes. Default is 16MB</td><td>16777216</td></tr><tr><td>stateful_ingestion.state_provider</td><td></td><td>DynamicTypedStateProviderConfig (see below for fields)</td><td>The ingestion state provider configuration.</td><td>None</td></tr><tr><td>stateful_ingestion.state_provider.type</td><td>✅</td><td>string</td><td>The type of the state provider to use. For DataHub use <code>datahub</code></td><td>None</td></tr><tr><td>stateful_ingestion.state_provider.config</td><td></td><td>Generic dict</td><td>The configuration required for initializing the state provider. Default: The datahub_api config if set at pipeline level. Otherwise, the default DatahubClientConfig. See the defaults (<a href="https://github.com/datahub-project/datahub/blob/master/metadata-ingestion/src/datahub/ingestion/graph/client.py#L19" target="_blank" rel="noopener noreferrer">https://github.com/datahub-project/datahub/blob/master/metadata-ingestion/src/datahub/ingestion/graph/client.py#L19</a>).</td><td>None</td></tr><tr><td>stateful_ingestion.ignore_old_state</td><td></td><td>boolean</td><td>If set to True, ignores the previous checkpoint state.</td><td>None</td></tr><tr><td>stateful_ingestion.ignore_new_state</td><td></td><td>boolean</td><td>If set to True, ignores the current checkpoint state.</td><td>None</td></tr><tr><td>stateful_ingestion.remove_stale_metadata</td><td></td><td>boolean</td><td>Soft-deletes the tables and views that were found in the last successful run but missing in the current run with stateful_ingestion enabled.</td><td>True</td></tr><tr><td>schema_pattern</td><td></td><td>AllowDenyPattern (see below for fields)</td><td>regex patterns for schemas to filter in ingestion.</td><td>{&#x27;allow&#x27;: <!-- -->[&#x27;.*&#x27;]<!-- -->, &#x27;deny&#x27;: [], &#x27;ignoreCase&#x27;: True, &#x27;alphabet&#x27;: &#x27;<!-- -->[A-Za-z0-9 _.-]<!-- -->&#x27;}</td></tr><tr><td>schema_pattern.allow</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to include in ingestion</td><td>[&#x27;.*&#x27;]</td></tr><tr><td>schema_pattern.deny</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to exclude from ingestion.</td><td>[]</td></tr><tr><td>schema_pattern.ignoreCase</td><td></td><td>boolean</td><td>Whether to ignore case sensitivity during pattern matching.</td><td>True</td></tr><tr><td>schema_pattern.alphabet</td><td></td><td>string</td><td>Allowed alphabets pattern</td><td>[A-Za-z0-9 _.-]</td></tr><tr><td>table_pattern</td><td></td><td>AllowDenyPattern (see below for fields)</td><td>regex patterns for tables to filter in ingestion.</td><td>{&#x27;allow&#x27;: <!-- -->[&#x27;.*&#x27;]<!-- -->, &#x27;deny&#x27;: [], &#x27;ignoreCase&#x27;: True, &#x27;alphabet&#x27;: &#x27;<!-- -->[A-Za-z0-9 _.-]<!-- -->&#x27;}</td></tr><tr><td>table_pattern.allow</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to include in ingestion</td><td>[&#x27;.*&#x27;]</td></tr><tr><td>table_pattern.deny</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to exclude from ingestion.</td><td>[]</td></tr><tr><td>table_pattern.ignoreCase</td><td></td><td>boolean</td><td>Whether to ignore case sensitivity during pattern matching.</td><td>True</td></tr><tr><td>table_pattern.alphabet</td><td></td><td>string</td><td>Allowed alphabets pattern</td><td>[A-Za-z0-9 _.-]</td></tr><tr><td>view_pattern</td><td></td><td>AllowDenyPattern (see below for fields)</td><td>regex patterns for views to filter in ingestion.</td><td>{&#x27;allow&#x27;: <!-- -->[&#x27;.*&#x27;]<!-- -->, &#x27;deny&#x27;: [], &#x27;ignoreCase&#x27;: True, &#x27;alphabet&#x27;: &#x27;<!-- -->[A-Za-z0-9 _.-]<!-- -->&#x27;}</td></tr><tr><td>view_pattern.allow</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to include in ingestion</td><td>[&#x27;.*&#x27;]</td></tr><tr><td>view_pattern.deny</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to exclude from ingestion.</td><td>[]</td></tr><tr><td>view_pattern.ignoreCase</td><td></td><td>boolean</td><td>Whether to ignore case sensitivity during pattern matching.</td><td>True</td></tr><tr><td>view_pattern.alphabet</td><td></td><td>string</td><td>Allowed alphabets pattern</td><td>[A-Za-z0-9 _.-]</td></tr><tr><td>profile_pattern</td><td></td><td>AllowDenyPattern (see below for fields)</td><td>regex patterns for profiles to filter in ingestion, allowed by the <code>table_pattern</code>.</td><td>{&#x27;allow&#x27;: <!-- -->[&#x27;.*&#x27;]<!-- -->, &#x27;deny&#x27;: [], &#x27;ignoreCase&#x27;: True, &#x27;alphabet&#x27;: &#x27;<!-- -->[A-Za-z0-9 _.-]<!-- -->&#x27;}</td></tr><tr><td>profile_pattern.allow</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to include in ingestion</td><td>[&#x27;.*&#x27;]</td></tr><tr><td>profile_pattern.deny</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to exclude from ingestion.</td><td>[]</td></tr><tr><td>profile_pattern.ignoreCase</td><td></td><td>boolean</td><td>Whether to ignore case sensitivity during pattern matching.</td><td>True</td></tr><tr><td>profile_pattern.alphabet</td><td></td><td>string</td><td>Allowed alphabets pattern</td><td>[A-Za-z0-9 _.-]</td></tr><tr><td>domain</td><td></td><td>Dict<!-- -->[str, AllowDenyPattern]</td><td>regex patterns for tables/schemas to descide domain_key domain key (domain_key can be any string like &quot;sales&quot;.) There can be multiple domain key specified.</td><td></td></tr><tr><td>domain.<code>key</code>.allow</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to include in ingestion</td><td>[&#x27;.*&#x27;]</td></tr><tr><td>domain.<code>key</code>.deny</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to exclude from ingestion.</td><td>[]</td></tr><tr><td>domain.<code>key</code>.ignoreCase</td><td></td><td>boolean</td><td>Whether to ignore case sensitivity during pattern matching.</td><td>True</td></tr><tr><td>domain.<code>key</code>.alphabet</td><td></td><td>string</td><td>Allowed alphabets pattern</td><td>[A-Za-z0-9 _.-]</td></tr><tr><td>profiling</td><td></td><td>GEProfilingConfig (see below for fields)</td><td></td><td>{&#x27;enabled&#x27;: False, &#x27;limit&#x27;: None, &#x27;offset&#x27;: None, &#x27;turn<em>off_expensive_profiling_metrics&#x27;: False, &#x27;profile_table_level_only&#x27;: False, &#x27;include_field_null_count&#x27;: True, &#x27;include_field_min_value&#x27;: True, &#x27;include_field_max_value&#x27;: True, &#x27;include_field_mean_value&#x27;: True, &#x27;include_field_median_value&#x27;: True, &#x27;include_field_stddev_value&#x27;: True, &#x27;include_field_quantiles&#x27;: False, &#x27;include_field_distinct_value_frequencies&#x27;: False, &#x27;include_field_histogram&#x27;: False, &#x27;include_field_sample_values&#x27;: True, &#x27;allow_deny_patterns&#x27;: {&#x27;allow&#x27;: <!-- -->[&#x27;.*&#x27;]<!-- -->, &#x27;deny&#x27;: [], &#x27;ignoreCase&#x27;: True, &#x27;alphabet&#x27;: &#x27;[A-Za-z0-9 </em>.-]&#x27;}, &#x27;max_number_of_fields_to_profile&#x27;: None, &#x27;max_workers&#x27;: 10, &#x27;query_combiner_enabled&#x27;: True, &#x27;catch_exceptions&#x27;: True, &#x27;partition_profiling_enabled&#x27;: True, &#x27;bigquery_temp_table_schema&#x27;: None, &#x27;partition_datetime&#x27;: None}</td></tr><tr><td>profiling.enabled</td><td></td><td>boolean</td><td>Whether profiling should be done.</td><td>None</td></tr><tr><td>profiling.limit</td><td></td><td>integer</td><td>Max number of documents to profile. By default, profiles all documents.</td><td>None</td></tr><tr><td>profiling.offset</td><td></td><td>integer</td><td>Offset in documents to profile. By default, uses no offset.</td><td>None</td></tr><tr><td>profiling.turn_off_expensive_profiling_metrics</td><td></td><td>boolean</td><td>Whether to turn off expensive profiling or not. This turns off profiling for quantiles, distinct_value_frequencies, histogram &amp; sample_values. This also limits maximum number of fields being profiled to 10.</td><td>None</td></tr><tr><td>profiling.profile_table_level_only</td><td></td><td>boolean</td><td>Whether to perform profiling at table-level only, or include column-level profiling as well.</td><td>None</td></tr><tr><td>profiling.include_field_null_count</td><td></td><td>boolean</td><td>Whether to profile for the number of nulls for each column.</td><td>True</td></tr><tr><td>profiling.include_field_min_value</td><td></td><td>boolean</td><td>Whether to profile for the min value of numeric columns.</td><td>True</td></tr><tr><td>profiling.include_field_max_value</td><td></td><td>boolean</td><td>Whether to profile for the max value of numeric columns.</td><td>True</td></tr><tr><td>profiling.include_field_mean_value</td><td></td><td>boolean</td><td>Whether to profile for the mean value of numeric columns.</td><td>True</td></tr><tr><td>profiling.include_field_median_value</td><td></td><td>boolean</td><td>Whether to profile for the median value of numeric columns.</td><td>True</td></tr><tr><td>profiling.include_field_stddev_value</td><td></td><td>boolean</td><td>Whether to profile for the standard deviation of numeric columns.</td><td>True</td></tr><tr><td>profiling.include_field_quantiles</td><td></td><td>boolean</td><td>Whether to profile for the quantiles of numeric columns.</td><td>None</td></tr><tr><td>profiling.include_field_distinct_value_frequencies</td><td></td><td>boolean</td><td>Whether to profile for distinct value frequencies.</td><td>None</td></tr><tr><td>profiling.include_field_histogram</td><td></td><td>boolean</td><td>Whether to profile for the histogram for numeric fields.</td><td>None</td></tr><tr><td>profiling.include_field_sample_values</td><td></td><td>boolean</td><td>Whether to profile for the sample values for all columns.</td><td>True</td></tr><tr><td>profiling.allow_deny_patterns</td><td></td><td>AllowDenyPattern (see below for fields)</td><td>regex patterns for filtering of tables or table columns to profile.</td><td>{&#x27;allow&#x27;: <!-- -->[&#x27;.*&#x27;]<!-- -->, &#x27;deny&#x27;: [], &#x27;ignoreCase&#x27;: True, &#x27;alphabet&#x27;: &#x27;<!-- -->[A-Za-z0-9 _.-]<!-- -->&#x27;}</td></tr><tr><td>profiling.allow_deny_patterns.allow</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to include in ingestion</td><td>[&#x27;.*&#x27;]</td></tr><tr><td>profiling.allow_deny_patterns.deny</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to exclude from ingestion.</td><td>[]</td></tr><tr><td>profiling.allow_deny_patterns.ignoreCase</td><td></td><td>boolean</td><td>Whether to ignore case sensitivity during pattern matching.</td><td>True</td></tr><tr><td>profiling.allow_deny_patterns.alphabet</td><td></td><td>string</td><td>Allowed alphabets pattern</td><td>[A-Za-z0-9 _.-]</td></tr><tr><td>profiling.max_number_of_fields_to_profile</td><td></td><td>integer</td><td>A positive integer that specifies the maximum number of columns to profile for any table. <code>None</code> implies all columns. The cost of profiling goes up significantly as the number of columns to profile goes up.</td><td>None</td></tr><tr><td>profiling.max_workers</td><td></td><td>integer</td><td>Number of worker threads to use for profiling. Set to 1 to disable.</td><td>10</td></tr><tr><td>profiling.query_combiner_enabled</td><td></td><td>boolean</td><td><em>This feature is still experimental and can be disabled if it causes issues.</em> Reduces the total number of queries issued and speeds up profiling by dynamically combining SQL queries where possible.</td><td>True</td></tr><tr><td>profiling.catch_exceptions</td><td></td><td>boolean</td><td></td><td>True</td></tr><tr><td>profiling.partition_profiling_enabled</td><td></td><td>boolean</td><td></td><td>True</td></tr><tr><td>profiling.bigquery_temp_table_schema</td><td></td><td>string</td><td>On bigquery for profiling partitioned tables needs to create temporary views. You have to define a schema where these will be created. Views will be cleaned up after profiler runs. (Great expectation tech details about this (<a href="https://legacy.docs.greatexpectations.io/en/0.9.0/reference/integrations/bigquery.html#custom-queries-with-sql-datasource" target="_blank" rel="noopener noreferrer">https://legacy.docs.greatexpectations.io/en/0.9.0/reference/integrations/bigquery.html#custom-queries-with-sql-datasource</a>).</td><td>None</td></tr><tr><td>profiling.partition_datetime</td><td></td><td>string</td><td>For partitioned datasets profile only the partition which matches the datetime or profile the latest one if not set. Only Bigquery supports this.</td><td>None</td></tr><tr><td>database_pattern</td><td></td><td>AllowDenyPattern (see below for fields)</td><td></td><td>{&#x27;allow&#x27;: <!-- -->[&#x27;.*&#x27;]<!-- -->, &#x27;deny&#x27;: <!-- -->[&#x27;^UTIL_DB$&#x27;, &#x27;^SNOWFLAKE$&#x27;, &#x27;^SNOWFLAKE_SAMPLE_DATA$&#x27;]<!-- -->, &#x27;ignoreCase&#x27;: True, &#x27;alphabet&#x27;: &#x27;<!-- -->[A-Za-z0-9 _.-]<!-- -->&#x27;}</td></tr><tr><td>database_pattern.allow</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to include in ingestion</td><td>[&#x27;.*&#x27;]</td></tr><tr><td>database_pattern.deny</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to exclude from ingestion.</td><td>[]</td></tr><tr><td>database_pattern.ignoreCase</td><td></td><td>boolean</td><td>Whether to ignore case sensitivity during pattern matching.</td><td>True</td></tr><tr><td>database_pattern.alphabet</td><td></td><td>string</td><td>Allowed alphabets pattern</td><td>[A-Za-z0-9 _.-]</td></tr><tr><td>provision_role</td><td></td><td>SnowflakeProvisionRoleConfig (see below for fields)</td><td></td><td></td></tr><tr><td>provision_role.enabled</td><td></td><td>boolean</td><td>Whether provisioning of Snowflake role (used for ingestion) is enabled or not.</td><td>None</td></tr><tr><td>provision_role.dry_run</td><td></td><td>boolean</td><td>If provision_role is enabled, whether to dry run the sql commands for system admins to see what sql grant commands would be run without actually running the grant commands.</td><td>None</td></tr><tr><td>provision_role.drop_role_if_exists</td><td></td><td>boolean</td><td>Useful during testing to ensure you have a clean slate role. Not recommended for production use cases.</td><td>None</td></tr><tr><td>provision_role.run_ingestion</td><td></td><td>boolean</td><td>If system admins wish to skip actual ingestion of metadata during testing of the provisioning of role.</td><td>None</td></tr><tr><td>provision_role.admin_role</td><td></td><td>string</td><td>The Snowflake role of admin user used for provisioning of the role specified by role config. System admins can audit the open source code and decide to use a different role.</td><td>accountadmin</td></tr><tr><td>provision_role.admin_username</td><td>✅</td><td>string</td><td>The username to be used for provisioning of role.</td><td>None</td></tr><tr><td>provision_role.admin_password</td><td></td><td>string</td><td>The password to be used for provisioning of role.</td><td>None</td></tr></tbody></table></div></div></details><h3 class="anchor anchorWithStickyNavbar_31ik" id="prerequisites">Prerequisites<a aria-hidden="true" class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h3><p>In order to execute this source, your Snowflake user will need to have specific privileges granted to it for reading metadata
from your warehouse.</p><p>You can use the <code>provision_role</code> block in the recipe to grant the requires roles.</p><p>If your system admins prefer running the commands themselves then they can follow this guide to create a DataHub-specific role, assign it the required privileges, and assign it to a new DataHub user by executing the following Snowflake commands from a user with the <code>ACCOUNTADMIN</code> role or <code>MANAGE GRANTS</code> privilege.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><pre tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">create</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">or</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">replace</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Grant access to a warehouse to run queries to view metadata</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> operate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">usage</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> warehouse </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-warehouse&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Grant access to view database and schema in which your tables/views exist</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">usage</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">DATABASE</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">usage</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">all</span><span class="token plain"> schemas </span><span class="token operator" style="color:rgb(137, 221, 255)">in</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">database</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">usage</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> future schemas </span><span class="token operator" style="color:rgb(137, 221, 255)">in</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">database</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// If you are NOT using Snowflake Profiling feature: Grant references privileges to your tables and views </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">references</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">all</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">tables</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">in</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">database</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">references</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> future </span><span class="token keyword" style="font-style:italic">tables</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">in</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">database</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">references</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">all</span><span class="token plain"> external </span><span class="token keyword" style="font-style:italic">tables</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">in</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">database</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">references</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> future external </span><span class="token keyword" style="font-style:italic">tables</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">in</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">database</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">references</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">all</span><span class="token plain"> views </span><span class="token operator" style="color:rgb(137, 221, 255)">in</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">database</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">references</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> future views </span><span class="token operator" style="color:rgb(137, 221, 255)">in</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">database</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// If you ARE using Snowflake Profiling feature: Grant select privileges to your tables and views </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">select</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">all</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">tables</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">in</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">database</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">select</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> future </span><span class="token keyword" style="font-style:italic">tables</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">in</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">database</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">select</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">all</span><span class="token plain"> external </span><span class="token keyword" style="font-style:italic">tables</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">in</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">database</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">select</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> future external </span><span class="token keyword" style="font-style:italic">tables</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">in</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">database</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">select</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">all</span><span class="token plain"> views </span><span class="token operator" style="color:rgb(137, 221, 255)">in</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">database</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">select</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> future views </span><span class="token operator" style="color:rgb(137, 221, 255)">in</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">database</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-database&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Create a new DataHub user and assign the DataHub role to it </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">create</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">user</span><span class="token plain"> datahub_user display_name </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;DataHub&#x27;</span><span class="token plain"> password</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&#x27;</span><span class="token plain"> default_role </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> datahub_role default_warehouse </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&lt;your-warehouse&gt;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Grant the datahub_role to the new DataHub user. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> role datahub_role </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">user</span><span class="token plain"> datahub_user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The details of each granted privilege can be viewed in <a href="https://docs.snowflake.com/en/user-guide/security-access-control-privileges.html" target="_blank" rel="noopener noreferrer">snowflake docs</a>. A summarization of each privilege, and why it is required for this connector:</p><ul><li><code>operate</code> is required on warehouse to execute queries</li><li><code>usage</code> is required for us to run queries using the warehouse</li><li><code>usage</code> on <code>database</code> and <code>schema</code> are required because without it tables and views inside them are not accessible. If an admin does the required grants on <code>table</code> but misses the grants on <code>schema</code> or the <code>database</code> in which the table/view exists then we will not be able to get metadata for the table/view.</li><li>If metadata is required only on some schemas then you can grant the usage privilieges only on a particular schema like</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><pre tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">usage</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">schema</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-database&gt;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;your-schema&gt;&quot;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>To get the lineage and usage data we need access to the default <code>snowflake</code> database</li></ul><p>This represents the bare minimum privileges required to extract databases, schemas, views, tables from Snowflake.</p><p>If you plan to enable extraction of table lineage, via the <code>include_table_lineage</code> config flag, you&#x27;ll need to grant additional privileges. See <a href="#prerequisites-1">snowflake usage prerequisites</a> as the same privilege is required for this purpose too.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="code-coordinates">Code Coordinates<a aria-hidden="true" class="hash-link" href="#code-coordinates" title="Direct link to heading">​</a></h3><ul><li>Class Name: <code>datahub.ingestion.source.sql.snowflake.SnowflakeSource</code></li><li>Browse on <a href="https://github.com/datahub-project/datahub/blob/master/metadata-ingestion/src/datahub/ingestion/source/sql/snowflake.py" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="module-snowflake-usage">Module <code>snowflake-usage</code><a aria-hidden="true" class="hash-link" href="#module-snowflake-usage" title="Direct link to heading">​</a></h2><p><img src="https://img.shields.io/badge/support%20status-certified-brightgreen" alt="Certified"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="install-the-plugin-1">Install the Plugin<a aria-hidden="true" class="hash-link" href="#install-the-plugin-1" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pip </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;acryl-datahub[snowflake-usage]&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="quickstart-recipe-1">Quickstart Recipe<a aria-hidden="true" class="hash-link" href="#quickstart-recipe-1" title="Direct link to heading">​</a></h3><p>Check out the following recipe to get started with ingestion! See <a href="#config-details">below</a> for full configuration options.</p><p>For general pointers on writing and running a recipe, see our <a href="/docs/metadata-ingestion#recipes">main recipe guide</a></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">source</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> snowflake</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">usage</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Coordinates</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">account_id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> account_name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">warehouse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;COMPUTE_WH&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Credentials</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">username</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;${SNOWFLAKE_USER}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;${SNOWFLAKE_PASS}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;datahub_role&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">top_n_queries</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">email_domain</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> mycompany.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">database_pattern</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">allow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;^ACCOUNTING_DB$&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;^MARKETING_DB$&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">schema_pattern</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">deny</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;information_schema.*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">sink</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># sink configs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="config-details-1">Config Details<a aria-hidden="true" class="hash-link" href="#config-details-1" title="Direct link to heading">​</a></h3><p>Note that a <code>.</code> is used to denote nested fields in the YAML recipe.</p><details class="details_2Ziz alert alert--info details_1VDD" data-collapsed="true"><summary>View All Configuration Options</summary><div><div class="collapsibleContent_3OHp"><table><thead><tr><th>Field</th><th>Required</th><th>Type</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td>env</td><td></td><td>string</td><td>The environment that all assets produced by this connector belong to</td><td>PROD</td></tr><tr><td>platform</td><td></td><td>string</td><td>The platform that this source connects to</td><td>None</td></tr><tr><td>platform_instance</td><td></td><td>string</td><td>The instance of the platform that all assets produced by this recipe belong to</td><td>None</td></tr><tr><td>bucket_duration</td><td></td><td>enum(BucketDuration)</td><td>Size of the time window to aggregate usage stats..</td><td>DAY</td></tr><tr><td>end_time</td><td></td><td>string</td><td>Latest date of usage to consider. Default: Last full day in UTC (or hour, depending on <code>bucket_duration</code>)</td><td>None</td></tr><tr><td>start_time</td><td></td><td>string</td><td>Earliest date of usage to consider. Default: Last full day in UTC (or hour, depending on <code>bucket_duration</code>)</td><td>None</td></tr><tr><td>top_n_queries</td><td></td><td>integer</td><td>Number of top queries to save to each table.</td><td>10</td></tr><tr><td>include_operational_stats</td><td></td><td>boolean</td><td>Whether to display operational stats.</td><td>True</td></tr><tr><td>format_sql_queries</td><td></td><td>boolean</td><td>Whether to format sql queries</td><td>None</td></tr><tr><td>scheme</td><td></td><td>string</td><td></td><td>snowflake</td></tr><tr><td>username</td><td></td><td>string</td><td>Snowflake username.</td><td>None</td></tr><tr><td>password</td><td></td><td>string</td><td>Snowflake password.</td><td>None</td></tr><tr><td>private_key_path</td><td></td><td>string</td><td>The path to the private key if using key pair authentication. See: <a href="https://docs.snowflake.com/en/user-guide/key-pair-auth.html" target="_blank" rel="noopener noreferrer">https://docs.snowflake.com/en/user-guide/key-pair-auth.html</a></td><td>None</td></tr><tr><td>private_key_password</td><td></td><td>string</td><td>Password for your private key if using key pair authentication.</td><td>None</td></tr><tr><td>authentication_type</td><td></td><td>string</td><td>The type of authenticator to use when connecting to Snowflake. Supports &quot;DEFAULT_AUTHENTICATOR&quot;, &quot;EXTERNAL_BROWSER_AUTHENTICATOR&quot; and &quot;KEY_PAIR_AUTHENTICATOR&quot;.</td><td>DEFAULT_AUTHENTICATOR</td></tr><tr><td>host_port</td><td></td><td>string</td><td>DEPRECATED: Snowflake account. e.g. abc48144</td><td>None</td></tr><tr><td>account_id</td><td></td><td>string</td><td>Snowflake account. e.g. abc48144</td><td>None</td></tr><tr><td>warehouse</td><td></td><td>string</td><td>Snowflake warehouse.</td><td>None</td></tr><tr><td>role</td><td></td><td>string</td><td>Snowflake role.</td><td>None</td></tr><tr><td>include_table_lineage</td><td></td><td>boolean</td><td>If enabled, populates the snowflake table-to-table and s3-to-snowflake table lineage. Requires appropriate grants given to the role.</td><td>True</td></tr><tr><td>include_view_lineage</td><td></td><td>boolean</td><td>If enabled, populates the snowflake view-&gt;table and table-&gt;view lineages (no view-&gt;view lineage yet). Requires appropriate grants given to the role, and include_table_lineage to be True.</td><td>True</td></tr><tr><td>connect_args</td><td></td><td>Dict</td><td>Connect args to pass to Snowflake SqlAlchemy driver</td><td></td></tr><tr><td>check_role_grants</td><td></td><td>boolean</td><td>If set to True then checks role grants at the beginning of the ingestion run. To be used for debugging purposes. If you think everything is working fine then set it to False. In some cases this can take long depending on how many roles you might have.</td><td>None</td></tr><tr><td>options</td><td></td><td>Dict</td><td>Any options specified here will be passed to SQLAlchemy&#x27;s create_engine as kwargs. See <a href="https://docs.sqlalchemy.org/en/14/core/engines.html#sqlalchemy.create_engine" target="_blank" rel="noopener noreferrer">https://docs.sqlalchemy.org/en/14/core/engines.html#sqlalchemy.create_engine</a> for details.</td><td></td></tr><tr><td>email_domain</td><td></td><td>string</td><td>Email domain of your organisation so users can be displayed on UI appropriately.</td><td>None</td></tr><tr><td>apply_view_usage_to_tables</td><td></td><td>boolean</td><td>Allow/deny patterns for views in snowflake dataset names.</td><td>None</td></tr><tr><td>stateful_ingestion</td><td></td><td>SnowflakeStatefulIngestionConfig (see below for fields)</td><td>Stateful ingestion related configs</td><td>None</td></tr><tr><td>stateful_ingestion.enabled</td><td></td><td>boolean</td><td>The type of the ingestion state provider registered with datahub.</td><td>None</td></tr><tr><td>stateful_ingestion.max_checkpoint_state_size</td><td></td><td>integer</td><td>The maximum size of the checkpoint state in bytes. Default is 16MB</td><td>16777216</td></tr><tr><td>stateful_ingestion.state_provider</td><td></td><td>DynamicTypedStateProviderConfig (see below for fields)</td><td>The ingestion state provider configuration.</td><td>None</td></tr><tr><td>stateful_ingestion.state_provider.type</td><td>✅</td><td>string</td><td>The type of the state provider to use. For DataHub use <code>datahub</code></td><td>None</td></tr><tr><td>stateful_ingestion.state_provider.config</td><td></td><td>Generic dict</td><td>The configuration required for initializing the state provider. Default: The datahub_api config if set at pipeline level. Otherwise, the default DatahubClientConfig. See the defaults (<a href="https://github.com/datahub-project/datahub/blob/master/metadata-ingestion/src/datahub/ingestion/graph/client.py#L19" target="_blank" rel="noopener noreferrer">https://github.com/datahub-project/datahub/blob/master/metadata-ingestion/src/datahub/ingestion/graph/client.py#L19</a>).</td><td>None</td></tr><tr><td>stateful_ingestion.force_rerun</td><td></td><td>boolean</td><td></td><td>None</td></tr><tr><td>stateful_ingestion.ignore_new_state</td><td></td><td>boolean</td><td>If set to True, ignores the current checkpoint state.</td><td>None</td></tr><tr><td>user_email_pattern</td><td></td><td>AllowDenyPattern (see below for fields)</td><td>regex patterns for user emails to filter in usage.</td><td>{&#x27;allow&#x27;: <!-- -->[&#x27;.*&#x27;]<!-- -->, &#x27;deny&#x27;: [], &#x27;ignoreCase&#x27;: True, &#x27;alphabet&#x27;: &#x27;<!-- -->[A-Za-z0-9 _.-]<!-- -->&#x27;}</td></tr><tr><td>user_email_pattern.allow</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to include in ingestion</td><td>[&#x27;.*&#x27;]</td></tr><tr><td>user_email_pattern.deny</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to exclude from ingestion.</td><td>[]</td></tr><tr><td>user_email_pattern.ignoreCase</td><td></td><td>boolean</td><td>Whether to ignore case sensitivity during pattern matching.</td><td>True</td></tr><tr><td>user_email_pattern.alphabet</td><td></td><td>string</td><td>Allowed alphabets pattern</td><td>[A-Za-z0-9 _.-]</td></tr><tr><td>database_pattern</td><td></td><td>AllowDenyPattern (see below for fields)</td><td>List of regex patterns for databases to include/exclude in usage ingestion.</td><td>{&#x27;allow&#x27;: <!-- -->[&#x27;.*&#x27;]<!-- -->, &#x27;deny&#x27;: <!-- -->[&#x27;^UTIL_DB$&#x27;, &#x27;^SNOWFLAKE$&#x27;, &#x27;^SNOWFLAKE_SAMPLE_DATA$&#x27;]<!-- -->, &#x27;ignoreCase&#x27;: True, &#x27;alphabet&#x27;: &#x27;<!-- -->[A-Za-z0-9 _.-]<!-- -->&#x27;}</td></tr><tr><td>database_pattern.allow</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to include in ingestion</td><td>[&#x27;.*&#x27;]</td></tr><tr><td>database_pattern.deny</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to exclude from ingestion.</td><td>[]</td></tr><tr><td>database_pattern.ignoreCase</td><td></td><td>boolean</td><td>Whether to ignore case sensitivity during pattern matching.</td><td>True</td></tr><tr><td>database_pattern.alphabet</td><td></td><td>string</td><td>Allowed alphabets pattern</td><td>[A-Za-z0-9 _.-]</td></tr><tr><td>schema_pattern</td><td></td><td>AllowDenyPattern (see below for fields)</td><td>List of regex patterns for schemas to include/exclude in usage ingestion.</td><td>{&#x27;allow&#x27;: <!-- -->[&#x27;.*&#x27;]<!-- -->, &#x27;deny&#x27;: [], &#x27;ignoreCase&#x27;: True, &#x27;alphabet&#x27;: &#x27;<!-- -->[A-Za-z0-9 _.-]<!-- -->&#x27;}</td></tr><tr><td>schema_pattern.allow</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to include in ingestion</td><td>[&#x27;.*&#x27;]</td></tr><tr><td>schema_pattern.deny</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to exclude from ingestion.</td><td>[]</td></tr><tr><td>schema_pattern.ignoreCase</td><td></td><td>boolean</td><td>Whether to ignore case sensitivity during pattern matching.</td><td>True</td></tr><tr><td>schema_pattern.alphabet</td><td></td><td>string</td><td>Allowed alphabets pattern</td><td>[A-Za-z0-9 _.-]</td></tr><tr><td>table_pattern</td><td></td><td>AllowDenyPattern (see below for fields)</td><td>List of regex patterns for tables to include in ingestion.</td><td>{&#x27;allow&#x27;: <!-- -->[&#x27;.*&#x27;]<!-- -->, &#x27;deny&#x27;: [], &#x27;ignoreCase&#x27;: True, &#x27;alphabet&#x27;: &#x27;<!-- -->[A-Za-z0-9 _.-]<!-- -->&#x27;}</td></tr><tr><td>table_pattern.allow</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to include in ingestion</td><td>[&#x27;.*&#x27;]</td></tr><tr><td>table_pattern.deny</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to exclude from ingestion.</td><td>[]</td></tr><tr><td>table_pattern.ignoreCase</td><td></td><td>boolean</td><td>Whether to ignore case sensitivity during pattern matching.</td><td>True</td></tr><tr><td>table_pattern.alphabet</td><td></td><td>string</td><td>Allowed alphabets pattern</td><td>[A-Za-z0-9 _.-]</td></tr><tr><td>view_pattern</td><td></td><td>AllowDenyPattern (see below for fields)</td><td>List of regex patterns for views to include in ingestion.</td><td>{&#x27;allow&#x27;: <!-- -->[&#x27;.*&#x27;]<!-- -->, &#x27;deny&#x27;: [], &#x27;ignoreCase&#x27;: True, &#x27;alphabet&#x27;: &#x27;<!-- -->[A-Za-z0-9 _.-]<!-- -->&#x27;}</td></tr><tr><td>view_pattern.allow</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to include in ingestion</td><td>[&#x27;.*&#x27;]</td></tr><tr><td>view_pattern.deny</td><td></td><td>Array of string</td><td>List of regex patterns for process groups to exclude from ingestion.</td><td>[]</td></tr><tr><td>view_pattern.ignoreCase</td><td></td><td>boolean</td><td>Whether to ignore case sensitivity during pattern matching.</td><td>True</td></tr><tr><td>view_pattern.alphabet</td><td></td><td>string</td><td>Allowed alphabets pattern</td><td>[A-Za-z0-9 _.-]</td></tr></tbody></table></div></div></details><h3 class="anchor anchorWithStickyNavbar_31ik" id="prerequisites-1">Prerequisites<a aria-hidden="true" class="hash-link" href="#prerequisites-1" title="Direct link to heading">​</a></h3><p>In order to execute the <code>snowflake-usage</code> source, your Snowflake user will need to have specific privileges granted to it. Specifically, you&#x27;ll need to grant access to the <a href="https://docs.snowflake.com/en/sql-reference/account-usage.html" target="_blank" rel="noopener noreferrer">Account Usage</a> system tables, using which the DataHub source extracts information. Assuming you&#x27;ve followed the steps outlined in <code>snowflake</code> plugin to create a DataHub-specific User &amp; Role, you&#x27;ll simply need to execute the following commands in Snowflake. This will require a user with the <code>ACCOUNTADMIN</code> role (or a role granted the IMPORT SHARES global privilege). Please see <a href="https://docs.snowflake.com/en/user-guide/data-share-consumers.html" target="_blank" rel="noopener noreferrer">Snowflake docs for more details</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sql"><pre tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> imported </span><span class="token keyword" style="font-style:italic">privileges</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">database</span><span class="token plain"> snowflake </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> role datahub_role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="capabilities">Capabilities<a aria-hidden="true" class="hash-link" href="#capabilities" title="Direct link to heading">​</a></h3><p>This plugin extracts the following:</p><ul><li>Statistics on queries issued and tables and columns accessed (excludes views)</li><li>Aggregation of these statistics into buckets, by day or hour granularity</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>This source only does usage statistics. To get the tables, views, and schemas in your Snowflake warehouse, ingest using the <code>snowflake</code> source described above.</p></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="caveats">Caveats<a aria-hidden="true" class="hash-link" href="#caveats" title="Direct link to heading">​</a></h3><ul><li>Some of the features are only available in the Snowflake Enterprise Edition. This docs has notes mentioning where this applies.</li><li>The underlying Snowflake views that we use to get metadata have a <a href="https://docs.snowflake.com/en/sql-reference/account-usage.html#differences-between-account-usage-and-information-schema" target="_blank" rel="noopener noreferrer">latency of 45 minutes to 3 hours</a>. So we would not be able to get very recent metadata in some cases like queries you ran within that time period etc..</li><li>If there is any <a href="https://status.snowflake.com/" target="_blank" rel="noopener noreferrer">incident going on for Snowflake</a> we will not be able to get the metadata until that incident is resolved.</li></ul><h3 class="anchor anchorWithStickyNavbar_31ik" id="code-coordinates-1">Code Coordinates<a aria-hidden="true" class="hash-link" href="#code-coordinates-1" title="Direct link to heading">​</a></h3><ul><li>Class Name: <code>datahub.ingestion.source.usage.snowflake_usage.SnowflakeUsageSource</code></li><li>Browse on <a href="https://github.com/datahub-project/datahub/blob/master/metadata-ingestion/src/datahub/ingestion/source/usage/snowflake_usage.py" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="questions">Questions<a aria-hidden="true" class="hash-link" href="#questions" title="Direct link to heading">​</a></h2><p>If you&#x27;ve got any questions on configuring ingestion for Snowflake, feel free to ping us on <a href="https://slack.datahubproject.io" target="_blank" rel="noopener noreferrer">our Slack</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/datahub-project/datahub/blob/master/docs/generated/ingestion/sources/snowflake.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/generated/ingestion/sources/sagemaker"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->SageMaker</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/generated/ingestion/sources/sqlalchemy"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Other SQLAlchemy databases<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#module-snowflake" class="table-of-contents__link toc-highlight">Module <code>snowflake</code></a><ul><li><a href="#important-capabilities" class="table-of-contents__link toc-highlight">Important Capabilities</a></li><li><a href="#install-the-plugin" class="table-of-contents__link toc-highlight">Install the Plugin</a></li><li><a href="#quickstart-recipe" class="table-of-contents__link toc-highlight">Quickstart Recipe</a></li><li><a href="#config-details" class="table-of-contents__link toc-highlight">Config Details</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#code-coordinates" class="table-of-contents__link toc-highlight">Code Coordinates</a></li></ul></li><li><a href="#module-snowflake-usage" class="table-of-contents__link toc-highlight">Module <code>snowflake-usage</code></a><ul><li><a href="#install-the-plugin-1" class="table-of-contents__link toc-highlight">Install the Plugin</a></li><li><a href="#quickstart-recipe-1" class="table-of-contents__link toc-highlight">Quickstart Recipe</a></li><li><a href="#config-details-1" class="table-of-contents__link toc-highlight">Config Details</a></li><li><a href="#prerequisites-1" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#capabilities" class="table-of-contents__link toc-highlight">Capabilities</a></li><li><a href="#caveats" class="table-of-contents__link toc-highlight">Caveats</a></li><li><a href="#code-coordinates-1" class="table-of-contents__link toc-highlight">Code Coordinates</a></li></ul></li><li><a href="#questions" class="table-of-contents__link toc-highlight">Questions</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/quickstart">Quickstart</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/features">Features</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://slack.datahubproject.io" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UC3qFQC5IiwR5fvWEqi_tJ5w" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://blog.datahubproject.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/townhalls">Town Halls</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/#adoption">Adoption</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/demo">Demo</a></li><li class="footer__item"><a href="https://feature-requests.datahubproject.io/roadmap" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Roadmap<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contributing">Contributing</a></li><li class="footer__item"><a href="https://github.com/datahub-project/datahub" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://feature-requests.datahubproject.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Feature Requests<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2015-2022 DataHub Project Authors.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.cd372191.js"></script>
<script src="/assets/js/main.764953a7.js"></script>
</body>
</html>